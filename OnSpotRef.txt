https://firebase.google.com/docs/use-cases/payments 
https://github.com/firebase/functions-samples/  stripe/ //by Cloud Functions 
https://medium.com/google-cloud/cashless-ecommerce-real-time-shopping-with-google-firebase-and-stripe-payment-51e7dbbe993e
https://inducesmile.com/android/android-mobile-ecommerce-online-shopping-app-students-project-idea/ downloaded app-debug.apk, open by https://www.apkdecompilers.com/ or android studio > build > APK analyzer 
https://www.programcreek.com/java-api-examples/index.php?api=com.stripe.model.Charge

https://stripe.com/docs/mobile/android
https://stripe.com/docs/api
compile 'com.stripe:stripe-android:3|4.1.0' //with compileSdkVersion 25, 5.1.0 with 26
compile 'com.stripe:stripe-java:4.1.0' //import com.stripe.model.Charge
https://stripe.com/docs/testing //test card
https://dashboard.stripe.com Hanger99! usox-amei-dyte-bsvh-ixww  
open new safari only with email and stripe to reveal sec key only once before auto update oct 10 25
https://www.raywenderlich.com/179260/accept-credit-cards-ios-apps-using-stripe //ios
https://www.appcoda.com/ios-stripe-payment-integration/

https://github.com/stripe/example-ios-backend/tree/v13.2.0
AppDelegate.swift pk_test|live match sk_test|live in https://dashboard.render.com/web/srv-d3kjc6h5pdvs739jh250 enviorment variable STRIPE_TEST_SECRET_KEY and stripe test mode

https://developers.facebook.com/docs/facebook-login/android/  richqluo@gmail.com Hanger99! richbluo Hanger99 if advance: One account per email address: same eamil can not be used for other auth acct, otherwise email/name left empty for the user in database  
facebook login> get start SDK choose platform > android >[download Facebook SDK] > project structure | new project  : Select API 15/Android 4.0.3
proj build.gradle : repositories {    mavenCentral() //search mavenLocal() on machine  %USER_HOME% or %M2_HOME%\conf\settings.xml then mavenCentral() http://repo1.maven.org/maven2/
app  build.gradle : dependencies {   compile 'com.facebook.android:facebook-android-sdk:[4,5)'

import com.facebook.FacebookSdk;
import com.facebook.appevents.AppEventsLogger;
layout.xml <com.facebook.login.widget.LoginButton //auto update status 
manifest    
<uses-permission android:name="android.permission.INTERNET"/>
<meta-data  android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/facebook_app_id"
app/src/main/res/values/ids.xml <string name="facebook_app_id">2048300435186962</string> //copy ids.xml may to values-w820dp notvalues  
misssing .ApplicationId java.lang.NullPointerException at java.util.concurrent.ConcurrentHashMap.containsKey(ConcurrentHashMap.java:774)
 at com.facebook.internal.Utility.queryAppSettings(Utility.java:822)  
 at com.facebook.login.widget.LoginButton$1.run(LoginButton.java:489)

create a new app > do not add product first, otherwise won't be able to save below (try add priv poly and data del url > save then app domain > return to save) 
settings basic AppId 2048300435186962/Secret 9da141129b37d740ce14e21780003fa0, set to  firebase/auth/facebook
app domain : boropost-ea8ed.firebaseapp.com (from  firebase)//facebook err:Given URL is not allowed by the App config
privacy / deletion instruction url (user terms url) //required for release
App purpose / Data protect contact info
[add platform>web >url :https://boropost-ea8ed.firebaseapp.com //match above]
advanced > security > client token (autogen)

add prod : facebook login > can only be saved at first time
Package:com.boropost.application
Default Activity:com.boropost.application.SignInActivity
[Enable Single Sign On] 
settings Valid OAuth redirect URIs = https://boropost-ea8ed.firebaseapp.com/__/auth/handler  (from  firebase/auth/facebook) 

//cd ~/.android : password: android, wont prompt pwd if not at ~/.android, pwd gen diff key
keytool -exportcert -alias androiddebugkey -keystore debug.keystore | openssl sha1 -binary | openssl base64
keyhash: +/FJAETJ76lTOXIlN1408IxftdM= 
   
keytool -list -v -keystore ~/.android/release.keystore
keytool -exportcert -alias  boropostreleasekey sendhubreleasekey -keystore ~/.android/release.keystore  | openssl sha1 -binary | openssl base64
/N7ixvjP2S9KoG0sliOZzhLb/YI=  n8+13Av7Ep/CCdFtr1Cj3lAXgvc=


App review : make public, Privacy Policy URL= https://github.com/boropost/app/blob/master/PrivacyPolicy

IOS
add platform > IOS > bundle id = com.boropost.app | single sign on = true
podfile : pod 'FBSDKLoginKit'
info.plist : add row
FacebookAppID (string)=2048300435186962 FacebookDisplayName (string)=Bost 
URL Types (array)> URL Schemas (array)> item = fb2048300435186962
LSApplicationQueriesSchemes (array)> item = fbauth2
import FBSDKLoginKit

WEB
Project Setting General + Web >Add Firebase SDK: Select Use npm | a <script> tag. //https://github.com/gabby-skelton/login-page/blob/main/README.md


https://apps.twitter.com/  richcluo@gmail.com
eanble permissions:Request email addresses from users (must provide Privacy Policy URL n Terms of Service URL) and click generate access token (revoke and regen if changed), Has access to your email address will be on approved list of the app at https://twitter.com/settings/applications forapp user to receive email in FirebaseAuth.getInstance().getCurrentUser().getEmail(), otherwise - stored as email 
app/src/main/res/values/ids.xml
    <string name="twitter_consumer_key">M9M7U5fWz96A1Ws831ay2Sdbw</string>
    <string name="twitter_consumer_secret">ASkumIVN6l9gnEejooKc3GMfFOVi13Otu8ArAnxOYY4bNLUBSa</string>
    set to  firebase/auth/twitter
https://dev.twitter.com/twitterkit/android/installation
proj build.gradle : repositories {  jcenter() 
app build.gradle : dependencies { compile 'com.twitter.sdk.android:twitter:3.0.0'//all
compile 'com.twitter.sdk.android:twitter-core:3.0.0'//login only
import com.twitter.sdk.android.core.Twitter|Core;    
TwitterConfig config = new TwitterConfig.Builder(this)
                .logger(new DefaultLogger(Log.DEBUG))
                .twitterAuthConfig(new TwitterAuthConfig(getString(R.string.twitter_consumer_key),getString(R.string.twitter_consumer_secret)))
                .debug(true)
                .build();
        Twitter.initialize(config); 
        FacebookSdk.sdkInitialize(getApplicationContext());
        //init facebook or twitter before inflate login button constructor know how to connect api
        setContentView(R.layout.activity_sign_in);
com.twitter.sdk.android.core.TwitterCore.getInstance().getSessionManager().getActiveSession().getAuthToken().token|secret; 

add callback url  For iOS: twitterkit-CONSUMERKEY:// For Android: twittersdk:// besides https://boropost-ea8ed.firebaseapp.com/__/auth/handler
IOS
URL Types (array)> URL Schemas (array)> item = twitterkit-M9M7U5fWz96A1Ws831ay2Sdbw //twitter_consumer_key
LSApplicationQueriesSchemes (array)> item = twitter item = twitterauth
import import TwitterKit

Info.plist (facebook + twitter)
	<key>CFBundleURLTypes</key>
	<array>
		<dict>
			<key>CFBundleTypeRole</key>
			<string>Editor</string>
			<key>CFBundleURLSchemes</key>
			<array>
				<string>com.googleusercontent.apps.1012799131250-decc1b9341lbil0rpttft48btp9a4s6n</string>
				<string>fb2048300435186962</string>
				<string>twitterkit-M9M7U5fWz96A1Ws831ay2Sdbw</string>
			</array>
		</dict>
	</array>
	
	<key>LSApplicationQueriesSchemes</key>
	<array>
		<string>fbauth2</string>
		<string>twitter</string>
		<string>twitterauth</string>
	</array>

GIT BASH
keytool -genkey -v -keystore ~/.android/debug.keystore -storepass android -alias androiddebugkey -keypass android -dname "CN=Android Debug,O=Android,C=US"
//[Storing C:/Users/holly/.android/debug.keystore]
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore -list -v -storepass android 
//Valid from: Sat Jul 08 12:04:40 EDT 2017 until: Fri Oct 06 12:04:40 EDT 2017 SHA1: FB:F1:49:00:44:C9:EF:A9:53:39:72:25:37:5E:34:F0:8C:5F:B5:D3 
keytool -exportcert -alias androiddebugkey -file bostdebugkey.cer -keystore ~/.android/debug.keystore //to file
keytool -import -alias androiddebugkey -file bostdebugkey.cer -keystore ~/.android/debug.keystore //another computer pwd Hanger99
Enter keystore password:<enter> without input
proj settings > add finger print,  per development machines. shared by many proj debug,
Before you publish your app, the release SHA-1 key needs to be uploaded in Project Settings. Each of the apps that users download from the Play Store is signed with the same release key
              > currency / timezone

download google-services.json and drag to app dir in AV or filesys, 
Project-level build.gradle (<project>/build.gradle):
buildscript {
  dependencies {
    // Add this line
    classpath 'com.google.gms:google-services:3.1.0'

App-level build.gradle (<project>/<app-module>/build.gradle):
// Add to the bottom of the file if not auto added
apply plugin: 'com.google.gms.google-services'

sync gradle (upgrade if need) then app repoint to src/main dir

build.gradle of top level
buildscript {
    dependencies {
        classpath "com.android.databinding:dataBinder:1.0-rc1"
build.gradle of application level
dependencies {//match proj struct > dependencies
    compile 'com.android.support:recyclerview-v7:23.0.0'
    // Facebook Android SDK (only required for Facebook Login)
    compile 'com.facebook.android:facebook-android-sdk:4.9.0'
    / Twitter Android SDK (only required for Twitter Login)
    compile('com.twitter.sdk.android:twitter-core:1.6.6@aar') {
        transitive = true
    }
    compile('com.twitter.sdk.android:twitter:1.13.1@aar') {
        transitive = true
    }

skooterapp/app/src/main/AndroidManifest.xml
<activity android:name=".LoadingActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
<activity
            android:name=".MainActivity"
LoadingActivity.java
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_loading);//res/layout/activity_loading.xml
startActivity(new Intent(this, MainActivity.class));

getApplicationContext() (lifecycle of current Application:Context) or this (=getContext() life cycle of current activity class : Context) 
Creating New objects: Creating new views(every view needs the context to access the right resources (e.g. the theme, strings etc.), adapters, listeners
TextView tv = new TextView(getContext()); ListAdapter adapter = new SimpleCursorAdapter(getApplicationContext(), ...);
Accessing Standard Common Resources: [intent] Services :Context like LAYOUT_INFLATER_SERVICE, SharedPreferences:
context.getSystemService(LAYOUT_INFLATER_SERVICE) getApplicationContext().getSharedPreferences(name, mode);
Accessing Components Implicitly: Regarding content providers, broadcasts, intent
getApplicationContext().getContentResolver().query(uri, ...);

                        
https://developer.android.com/guide/topics/ui/layout/relative.html
<include
        android:id="@+id/post_text_layout"
        layout="@layout/include_post_text" //reusable layout/include_post_text.xml
        android:layout_below="@+id/post_author_layout"  //related pos to another android:id 

fragment has its own layout and lifecycle closely related to the lifecycle of its host activity. add or remove fragments in an activity while the activity is running. fragment can implement a behavior has no user interface (return null from onCreateView)
Activity's onAttachFragment() ->  
Fragment's onCreate(non-graphical initialisations: assign variables, get Intent extras,except access View hierarchy not ready before Activity's onCreate()) ->
Fragment's onCreateView(graphical initialisations and assign View variables). 
Activity's onCreate() ->
Fragment's onActivityCreated() to final initialisations (for example, modifying UI elements).

<FrameLayout tools:context=".MainActivity">
<android.support.v7.widget.RecyclerView 
    android:id="@+id/messages_list"
    tools:listitem="@layout/item_post" />
//fragment_all_posts.xml {RecyclerView android:id="@+id/messages_list"{ tools:listitem="@layout/item_post" 
//PostViewHolder extends RecyclerView.ViewHolder is item data model with itemtemplate item_post.xml { include_post_author.xml bind to each post
//The populateViewHoldermethod works almost the same as onChildAdded/onChildChanged where it returns each child under a referenced node postsQuery (REF: extend FirebaseRecyclerAdapter to multiple query[i].addChildEventListener(mListener);).The FirebaseRecyclerAdapter will call our populateViewHolder method for each Post it finds in the database.

https://www.learnhowtoprogram.com/android/gestures-animations-flexible-uis/updating-data-after-gesture-interactions
FirebaseRestaurantListAdapter {
public void onChildAdded(DataSnapshot dataSnapshot, String s) {
                mRestaurants.add(dataSnapshot.getValue(Restaurant.class));
            }
	        Intent intent = new Intent(mContext, RestaurantDetailActivity.class);
                intent.putExtra("position", viewHolder.getAdapterPosition());
                intent.putExtra("restaurants", Parcels.wrap(mRestaurants));
                mContext.startActivity(intent);
		
 RestaurantDetailActivity{ mRestaurants = Parcels.unwrap(getIntent().getParcelableExtra("restaurants"));
 int startingPosition = getIntent().getIntExtra("position", 0);
         adapterViewPager = new RestaurantPagerAdapter(getSupportFragmentManager(), mRestaurants);
        mViewPager.setAdapter(adapterViewPager);
        mViewPager.setCurrentItem(startingPosition);

query.child("0/1300106/81/57").orderByKey().startAt("100").limitToLast(2); //only return immediate child post after max subtree key 99, newer the later, only for query not reference 

//https://www.codementor.io/tips/1237823034/how-to-filter-a-recyclerview-with-a-searchview
skooterapp/common/view/SlidingTabLayout.java //constant feedback as to * the user's scroll progress.

Firebase end node must name:val, mid node name(key) must be unique, must have at least 1 leaf (value) node to save all super (name) nodes, click parent node to its detail page to del/modify child (type in value not name and return) wont impact upper nodes, export/import override all children under parent/root (exclude parent) to db-root-export file
Firebase ref = new Firebase("https://dinosaur-facts.firebaseio.com/dinosaurs");
Query queryRef = ref.orderByChild("height");

postsQuery.addChildEventListener(new ChildEventListener() {
    public void onChildAdded(DataSnapshot snapshot, String previousChild) {
        System.out.println(snapshot.getKey() + " was " + snapshot.getValue().get("height") + " meters tall");
    }
    // ....
});
msgRef.orderByChild("date").endAt(3)
http://cliffordhall.com/2017/04/using-firebase-cloud-functions-manage-compound-key-index/

https://github.com/GoogleCloudPlatform/nodejs-docs-samples/tree/master/functions

https://cloud.google.com/functions/docs/tutorials/http  //http trigger cloud function
> enable cloud API > sel boropost , [...]function in firebase console
Install and initialize the Cloud SDK. https://cloud.google.com/sdk/docs/
Program Files X86 Google\Cloud SDK> gcloud init > pick boropost project > create config
https://cloud.google.com/sdk/docs/components //Program Files X86 Google\Cloud SDK> gcloud components install | update app-engine-go and other comp
[https://console.cloud.google.com/home/dashboard?project=boropost-ea8ed&pli=1  // cloud online console] 
Install Node.js download https://nodejs.org/en/ install include npm package mgr,free node.js editor https://code.visualstudio.com/docs/?dv=win (search node.js for tutor, ctrl-s before run node index.js)
 env var >system (install for all users)> PATH C:\Program Files (x86)\Google\Cloud SDK\google-cloud-sdk\bin;C:\Program Files\nodejs\ 
         >user (install for cur user)> PATH C:\Program Files\Microsoft VS Code\bin;C:\Users\holly\AppData\Roaming\npm

https://firebase.google.com/docs/admin/setup //npm install firebase-admin --save
firebase console > boropost settings > service account tab > admin sdk > gen new privatw key > boropost-ea8ed.json file
https://firebase.google.com/docs/database/admin/start

//npm install --save @google-cloud/storage
https://www.techotopia.com/index.php/A_Cloud_Functions_and_Firebase_Cloud_Storage_Example

web hosting https://medium.com/@aleemuddin13/how-to-host-static-website-on-firebase-hosting-for-free-9de8917bebf2
after Install Node.js, vscode terminal > cd depo/app/web > npm install -g firebase-tools //update latest > [running scripts is disabled : pwershell$  Set-ExecutionPolicy RemoteSigned -Scope CurrentUser] >firebase login [--reauth] > firebase init (set up web dir) > is out of home dir : y > arrow up/down select hosting > sel firebase boropost project > single page app : y > <public> : y to create /public/index.html and firebase.json (config)
firebase serve > start local server http://localhost:5000 (output incoming request) > ctrl-c stop
firebase boropost project > hosting > get start - finish > 
firebase deploy > https://boropost-ea8ed.firebaseapp.com
firebase boropost project > hosting > conn domain > copy TXT val to GODADDY (richcluo Hanger7139 https://sso.godaddy.com/login?app=o365&realm=pass&username=admin@boropost.com Hanger7139!) DNS mgr add TXT record > after 1 hour > firebase verify > show 2 IP copy to GODADDY DNS mgr add A record, click existing A record in GODADDY and trash can icon to del it for new to take effect
https://codebeautify.org/htmlviewer
zoho.com mail bostmedios@gmail.com Hanger99! https://mail.zoho.com/zm/#mail/folder/inbox
vmare fusion bostmedios Hanger99!

Cloud functions
https://firebase.google.com/docs/functions/get-started //npm install -g firebase-tools, firebase login,  C:\Depo\App\Android\CloudFunc\Bost>firebase init, selcet functions, pick boropost project : install all lib \functions\node_modules\ and  firebase.json 
run below under functions> to upgreade after install the newer node.js v12, update package.json "node":"12"
npm install firebase-functions@latest firebase-admin@latest --save
npm install -g firebase-tools
functions\index.js:
const functions = require('firebase-functions'); //$ npm install -g firebase-tools
const {Storage} = require('@google-cloud/storage'); //npm install --save @google-cloud/storage
const admin = require('firebase-admin'); //$ npm install firebase-admin --save //to access the Firebase Realtime Database
//ignore Warning, FIREBASE_CONFIG environment variable is missing, which is used for admin.initializeApp() by GOOGLE_APPLICATION_CREDENTIALS 
// store boropost-ea8ed.json at same dir as index.js
const admin = require('firebase-admin');
const serviceAccount = require("./boropost-ea8ed-firebase-adminsdk-140ib-682f0b6fce.json");

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: "https://boropost-ea8ed.firebaseio.com"
  storageBucket: "boropost-ea8ed.appspot.com", //exclude gs://
  projectId: "boropost-ea8ed"
});
//var bucket = admin.storage().bucket(); defaultbucket in defaultStorage is an object defined in the @google-cloud/storage library.
//do not have to authenticate Google Cloud Storage libraries when bucket references returned by the Admin SDK are already authenticated 
exports.expirePostDaily = functions.https.onRequest((request, response) => {
let dt = new Date();
//getUTCMonth() return 0-11
let month = dt.getUTCMonth()+1;
var monthStr;
if (month < 10) {
    monthStr = '0' + month.toString();
} else {
    monthStr = month.toString();
}
let day = dt.getUTCDate();
var dayStr;
if (day < 10) {
    dayStr = '0' + day.toString();
} else {
    dayStr = day.toString();
}
//let exp = dt.getUTCFullYear().toString() + monthStr + dayStr;
let exp = "20180810";
console.log("current expiry: " + exp);
const ref = admin.database().ref("/hist");
ref.orderByKey().endAt(exp).once('value').then(topSnap => {
    topSnap.forEach(function(midSnap) {
        console.log("start deleting hist/" + midSnap.key);
        midSnap.forEach(function(subSnap) {
            let path = subSnap.val();
            let i = path.indexOf("post-img");
            if(i >= 0){//storage
                const bucket = admin.storage().bucket("boropost-ea8ed.appspot.com");
                bucket.file(path).delete().then(function() {
                    //console.log("succeed deleting " + path);
                    subSnap.ref.remove()
                  }).catch(function(error) {
                    console.error("failed deleting " + path + " : " + error);
                  });
            } else {
                var subRef = admin.database().ref(path);
                subRef.remove().then(function() {
                    //console.log("succeed deleting " + path);
                    //remove hist/<date>/<guid> only after posts/<guid> is successfully removed, 
                    //hist/<date> auto deleted after all <guid> are removed
                    subSnap.ref.remove()
                  }).catch(function(error) {
                    console.error("failed deleting " + path + " : " + error);
                  });
            }
            /*
            subSnap.ref.remove().then(function() {// not ref()
                console.log("succeed deleting hist/" + path);
              }).catch(function(error) {
                console.error("failed deleting hist/" + path + " : " + error);
              });
              */
        });
    });
}).catch(e => console.error(e));
    response.send("expirePostDaily is executed!");
});
run from local: uncomment local version instead of expirePostDaily def, debug > start without debug, click stop button
functions>firebase login --reauth
functions>firebase deploy --only functions //deploy or update (auto version++) 
return url: https://us-central1-boropost-ea8ed.cloudfunctions.net/expirePostDaily exe by browser (curl/webget not in windows), and listed on firebase console [...]function and log, gcloud beta functions delete expirePostDaily


Mac 
sudo cp /Users/hollykaldrovics/bin/expirePostDaily.sh /Library/Scripts/   // 1 root  wheel
curl https://us-central1-boropost-ea8ed.cloudfunctions.net/expirePostDaily
date >> /tmp/expirePostDaily.out

vim com.bost.expirePostDaily.plist
sudo cp com.bost.expirePostDaily.plist /Library/LaunchDaemons/

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.bost.expirePostDaily</string>
    <key>ProgramArguments</key>
    <array>
        <string>/bin/bash</string>
        <string>/Library/LaunchDaemons/expirePostDaily.sh</string> 
	//wget | curl https://us-central1-boropost-ea8ed.cloudfunctions.net/expirePostDaily
	//date >> /tmp/expirePostDaily.out
    </array>
    //<key>StartInterval</key>
    //<integer>60</integer> seconds
    <key>StartCalendarInterval</key>
    <dict>
        <key>Hour</key> //1:00AM daily
        <integer>1</integer>
        <key>Minute</key>
        <integer>0</integer>
    </dict>
    <key>StandardErrorPath</key>
    <string>/tmp/expirePostDaily.err</string>
    <key>StandardOutPath</key>
    <string>/tmp/expirePostDaily.out</string>
</dict>
</plist>

chown root:wheel com.bost.expirePostDaily.plist //chmod 664  if not rw-r-r-r
launchctl load com.bost.expirePostDaily.plist //tmp/expirePostDaily.out is created run as root after reboot, 
launchctl unload com.bost.expirePostDaily.plist 

exports.listenOnWrite = functions.database.ref('/foo/{id}').onWrite(event => { console.log("match....");}) //cloud func
firebase.database().ref("/foo/").on('child_added', function (postSnapshot) { var id = postSnapshot.key;}); //node.js using Admin SDK.

DatabaseReference extends Query extends Object
Query.equalTo, orderByChild(String path)|Key|value() also in dbRef js, limitToFirst|last  start|endAt getRef() need order, keepSynced(auto download),  add|removeChild|ValueEventListener|addListenerForSingleValueEvent 
DatabaseReference.setValu,e push, getKey(), child(String pathString) getParent|root() return DatabaseReference, updateChildren(Map), removeValue(), runTransaction
string,double,long,Boolean, Map<String, Object>, List<Object>

https://firebase.googleblog.com/2013/10/queries-part-1-common-sql-queries.html 
".read": "auth == null",test simulator turn off auth
or enable firebase anonymous auth, rules ".read": "auth != null", test simulator turn on auth select anonymous provider which gen anonymous auth token

https://jsfiddle.net/
+external resource:  https://www.gstatic.com/firebasejs/4.8.2/firebase.js
javascript + jQuery(edge) (turn on firebuglite for console)
turn off auth rule in firebase ".read": "auth == null",
HTML:
<div id="result"></div>
javascript
let config = {
  "apiKey": "AIzaSyB1QS5UCKuwaB6NdcyXNyPT9TOiAZR6O0Y",
  "authDomain": "boropost-ea8ed.firebaseapp.com",
  "databaseURL": "https://boropost-ea8ed.firebaseio.com"
};
firebase.initializeApp(config);
let db = firebase.database().ref();
let query = db.child("mac-posts/1/11/30/6/81/57/20");
query.once('value').then(snap => {
	snap.forEach(function(data) {
    var post = data.val();
    $("#result").append('<p>' + post.body+ '</p>');
  });
}).catch(e => console.log(e));

query.once('value').then(snap => {	
	snap.forEach(function(data) {
		var uids=JSON.stringify(data.val()); 
		var beg=0;
		var pos=0;
   	whle(true){//parse leaf xxx from "xxx":uid" from high level node latitudes/-77/38/8/9
    	pos=uids.indexOf('":uid"',pos); //search after prev pos 
    	if(pos>0){
      	if(beg==0){ //only for the first uid
        	beg=pos-1;
      		while(beg>0 && uids.charAt(beg)!='"'){//prev "
          	beg--;
          }
        }
      	if(beg>0){//only if has prev "
          $("#result").append('<p>' + uids.substring(beg+1,pos) + '</p>');
        }
      	pos+=8;
            beg=pos;
      	while(uids.charAt(beg)!='"'){//next "
        	beg++;
        }
      } else break;
		} 
  });
}).catch(e => console.log(e)); //same as .then(function(snap) {

let query = db.child("users/nNosBR5IaoXNnSsubByOnM1BIgM2/posts/1");
query.once('value').then(snap => {	
  snap.forEach(function(data) {  
    var post= data.val();//get obj from uniquekey{object} exclude uniquekey
    $("#result").append('<p>' + post.body + '</p>'); 	
    $("#result").append('<p>' + JSON.stringify(data.child("body").val()|key) + '</p>');
    $("#result").append('<p>' + data.child("to").numChildren()+ '</p>');
    data.child("re").forEach(function(dt) {
    	var re=dt.val();
    	$("#result").append('<p>' + re.text + '</p>');
    });
    data.child("to").forEach(function(dt) {
    	$("#result").append('<p>' + dt.key + '</p>');
    });
  });
});	

query.orderByValue().limitToLast(2).on("value", function(snapshot) {
  snapshot.forEach(function(data) {
            //data.ref().child("next").on(...);  ??recusive
  	console.log(data.key + "|" + JSON.stringify(data.val(), null, 2));//JSON.parse|stringify() de|serializes a JS object from to a JSON string.
  });
});
query.orderByValue().equalTo(1).once('value', function(snapshot) {//or equalTo("uid") dep on orderBy}

var postRef = query[.child(2)].push(); //add a new empty child with name=uniqueId [create/locate node 2 if not/ exist}
postRef.set({//set overwrite all at current ref, while update change existing value based on key
  'title': 'tt',
  'body': 'tb'
});
transaction() is used to modify the existing value to a new value, ensuring there are no conflicts with other clients writing to the same location at the same time.

query.on("child_added", function(snapshot) {//return each existing child at first and trigger upon new 
  var post = snapshot.val();
  $("#result").append('<p>' + post.body + '</p>');
});

compile 'com.google.firebase:firebase-storage:11.0.2' not 11.2.0 as doc to sync with database 11.0.2, otherwise Found com.google.firebase:firebase-storage:11.2.0, but version 11.0.2 is needed for the google-services plugin 
storage: files{bucket gs://database-1ab1b.appspot.com, +folder images} | rules{ request.auth 1= null }
var config = {
  apiKey: "AIzaSyAMs6eu3EO0z_PJ-TwA8ctI7-KBXEVJgHg",
  authDomain: "database-1ab1b.firebaseapp.com",
  databaseURL: "https://database-1ab1b.firebaseio.com",
  storageBucket: "gs://database-1ab1b.appspot.com"
};
firebase.initializeApp(config);

var storageRef = firebase.storage().ref();
var imagesRef = storageRef.child('images');
var fileName = 'RQL.png';
var spaceRef = imagesRef.child(fileName);
imgRef.getDownloadURL().then(function(url) {
	$("#result").append('<p>' + url + '</p>');
}).catch(function(error) {
    switch (error.code) {
    case 'storage/object_not_found':
    case 'storage/unauthorized':
    case 'storage/canceled':
    case 'storage/unknown': //Unknown error 
      break;
  }
});

https://github.com/codepath/android_guides/wiki/Displaying-Images-with-the-Glide-Library
http://bumptech.github.io/glide/doc/migrating.html
http://bumptech.github.io/glide/javadocs/400/com/bumptech/glide/request/RequestOptions.html

https://developer.android.com/training/location/retrieve-current.html
https://developer.android.com/guide/topics/location/strategies.html //android.location.LocationManager 
https://developer.android.com/training/location/retrieve-current.html //FusedLocationProviderClient depend on Google Play Services SDK  AV SDK Manager: click SDK Tools, expand Support Repo, select Google Repository    dependencies { compile 'com.google.android.gms:play-services:11.0.2'    }//device that runs Android 4.0 or higher and includes Google Play Store.
https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample
https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates
request the user's permission by declaring either the 
ACCESS_COARSE_LOCATION NETWORK_PROVIDER (street block level)
or ACCESS_FINE_LOCATION NETWORK_PROVIDER and GPS_PROVIDER
<manifest ... >
    <uses-permission android:name="android.permission.ACCESS_COARSE|FINE_LOCATION" />    
    <uses-feature android:name="android.hardware.location.network|gps" /><!-- app targets Android 5.0 (API level 21) or higher. -->

Latitudes [-90,90]. Longitudes [-180,180]  http://andrew.hedges.name/experiments/haversine/
[-90,90] +90 to [0,180], [-180,180]  +180 to [0,360], 
 (38.898556 -77.037852) > (128.8985, 103.0378) > 11/20/83/80/93/87/58
 [0-1][0-3]=8 / [0-8][0-6]=63  / [0-9][0-9]=100 /...
 world=8*region(8000|4000km 8x8appro.63)=63*area(1000|500km)=100*town(100|50km)=100*zone(10|5km)=100*around(1km|500m)=100*near(100|50m)=100*close(rect:10m|radius:5m)
distance btw 128.8985-4 (same lgt) 11/20/83/80/93/87/58-48 = 10m,  103.037-6 (same lat) 11/20/83/80/93/87-86 = 100m ...

Center of 38.8986, 74.0371 is 
Rect(38.8980-9,74.0370-9) 100x100 cover by p(38.898,74.037)
C(38.8985,74.0375) r =50m
C(38.895,74.035) r=500m
C(38.85,74.05) r=5,000m
C(38.5,74.5) r=50,000m
C(35,75) r=500,000m
-180 -90 0 90 180 X -90 0 90 = 8 rect
P(38,74) in rect (0-90, 0-90) C(45,45) r=4000,000m

corner case 
NYC(40.,-73.) Clifton(40,-74) Avon(40,-74) //Clifton in same town with Avon but not NYC
NYC(40.,-73.) > (130, 107) 2/30/7   FL(26,-81) > (116,099) 1/19/69 //in diff regions

user-post for mycast to listen, order by date for clean up (path to copy on loactions) on regular basis by cloud function by wildcards matches
ref("user-post/{uId}/<postid>")   /posts/1/xxx or /posts/2/xxx, invocation ret event.params.1|2
Path match all events (onwrite|create|update|delete) that happen anywhere below it.  

open-source-android-apps

enable Virtual T in BIOS, run app first time to start emulator to be connected device, run again to launch app on it.
5:debugger> drag variables to right to view frames/threads as call stack
Log.d(tag, message);//6:Android Monitor>Logcat
V — Verbose (lowest priority)
D — Debug
I — Info
W — Warning
E — Error
A — Assert 
Android Monitor: device being monitored=ADB enabled > memory|cpu|network monitor 
Tools > Android > SDK Manager > SDK platform (android)| tools (emulator,playsvc,google USB driver...) selecct > apply
                > AVD Manager
                >enable ADB int (for run on phone)
        firebase>auth/database   
help > update 
run> edit config > 
VCS > check out from version control: github
File>Project Structure=>app(i.e left pannel)=>Properties=>SDK loc proj gradle/android version 
app>SDK|Build Tools Version,sign,Flavor default|minSDKJellyBean:min/targetSDK Version 19 (change to 16 =phone), build type:debug|relese dependencies
     Settings > Build, Execution, Deployment > disable "Instant Run" if  “Unable to get provider com.google.firebase.provider.FirebaseInitProvider” Error 
                                             >Compiler>Add "--stacktrace" to "Command-line Options"
              > Plugins (built-in Image Asset Studio, Theme and Layout Editor ) >Browse repositories  ADB(android cmd), Codota
Right-click the res folder and select New > Image Asset (res/mipmap launcher icon, res/drawable/x|m|hdpi/(copy same img each has diff size, auto group on AS) other types of icons, can access image from the main thread only.refer to image as @drawable in XML or Drawable in Java)
Right-click the strings.xml file, and select Open Translations Editor. click global icon to add locale, auto gen a value-zh/string.xml  
new value res file: ints|bools|arrays.xml (file name doesnot matter) <res> <integer|bool|array name="location_size">4</integer>  ref by attr name "@integer|bool|array/location_size" or R.integer|bool|array.location_size 
<ImageView    android:src="@drawable/myimage" />
Resources res = getResources();// Context.getResources class applies to UI objects, such as activities, fragments, layouts, views,
Drawable drawable = res.getDrawable(R.drawable.myimage);
ImageView imageView = (ImageView) findViewById(R.id.myimageview);
imageView.setImageResource(R.drawable.myimage);//reset image
//android.R.layout.xxx standard/system resources @android:color/xxx
getWindow().setBackgroundDrawableResource(R.drawable.my_background_image) ;
setContentView(R.layout.main_screen);
mFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.hyperspace_in));//view anim (old)
add a drwwable resource file (xml) under res/drawable, 360x96/72 to get size for 72 
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"    android:oneshot="true"> //drawable anim
    <item android:drawable="@drawable/rocket_thrust1" android:duration="200" />
<EditText id="text"   android:textColor="?android:textColorSecondary" //apply attr:val defined in std android:textColorSecondary style
style="@style/CodeFont" //apply all attr:val defined in CodeFont style
res/values/A theme is styles applied to an entire Activity or app, rather than an individual View
<application android:theme="@style/CustomTheme">//apply to whole app in AndroidManifest.xml 
<activity android:theme="@android:style/Theme.Translucent">//only std theme (tranparent) to the act
<resources>
    <style name="CodeFont" parent="@android:style/TextAppearance.Medium">//<style name="CodeFont.Red.Big"> inheritance Big:Red:CodeFont
        <item name="android:textColor">#00FF00</item>
Build > Select Build Variant from the menu bar (or btn tool window bar to select minSdkJellyBeanDebug vs minSdkIncs
      >rebuild (if unused import) = clean (if cant resolve R, INSTALL_FAILED_INVALID_APK, changed manifest) + make proj
      >sel variant : debug|release
Analyze > dependency | stacktrace  | Inspect Code (Lint find issues such as deprecated elements, or API calls that aren't supported by your target API.)    
run app second time to see app on phone

clean C:\Users\holly\.android\build-cache and rebuild proj if err after rename layout element 
clean C:\Users\holly\.gradle if Error:Failed to complete Gradle execution. Cause: invalid stream header: 07D06A0F)

Enable USB debugging on your device by going to Settings > Developer options
Note: On Android 4.2 and newer, Developer options is hidden by default. To make it available, go to Settings > About phone and tap Build number seven times. Return to the previous screen to find Developer options. enable debug when USB disconnected after remove google account
down load OEM USB driver.exe from sumsong ny model from settings
win7 >device mgr> sumsung Android ADB intf> Update Driver Software >Browse Google USB Driver in C:\Users\holly\AppData\Local\Android\sdk\extras\google\usb_driver\. after install google USB driver from SDL mgr

emulator bottom ...>location :GPS point

Xcode 9 error: “iPhone has denied the launch request” >  iphone settings > incompleted setup > continue and cancel or (scheme->edit scheme->info->Executable= "Ask on Launch" or debug executable uncheck > fix but debug disable)

string mem = chars X 2 + 38 pad to 8s
3|4|5 X 2 + 38 = 44|46|48 pad 4|2|0 to 48
6|7|8|9 X 2 + 38 = 50|52|54|56  pad 6|4|2|0 to 56
post.from|text|image|favCt|vetCt|reCt
user.uname

if all you need is a static bar at the top that can host icons and a back button, then you can safely continue to use ActionBar.
always (on bar)| ifRoom | never (only in popping up menu) |withText  (after either always or ifRoom button = both icon and title)
https://stackoverflow.com/questions/18374183/how-to-show-icons-in-overflow-menu-in-actionbar

https://stackoverflow.com/questions/31231609/creating-a-button-in-android-toolbar //need upload pic to storage first
disable the theme-provided ActionBar within the res/styles.xml file
<resources>
  <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
  </style>
<resources>

https://stackoverflow.com/questions/39704291/how-can-i-add-name-profile-pic-address-of-a-user-to-firebase-database
https://github.com/chintansoni202/Firebase-Authentication-Basic activity_profile.xml profileactivity.java ReAuthenticateDialog

Telegram/tree/drawable-xhdpi/profile_list.png PreferenceScreen
minicat:options.xml android.preference.Preference
ndroid-money-manager-ex/drawable/help,cancel,strings.xml(lang) android.support.v7|14.preference.SwitchPreferenceCompat
financius/values-de|ru/

https://developer.android.com/guide/topics/ui/settings.html
With preference-v7 library you can replace PreferenceFragment (API 11+) with PreferenceFragmentCompat subclass, and SwitchPreference (API 14+) with SwitchPreferenceCompat
https://storiesandroid.wordpress.com/2015/10/06/android-settings-using-preference-fragments/
https://stackoverflow.com/questions/32070186/how-to-use-the-v7-v14-preference-support-library

 FacebookSdk. ... sdkInitialize() is deprecated from SDK V4.19 onwards, auto init by manifest <meta-data android:name="com.facebook.sdk.ApplicationId", but still rarely null, fix: try{AccessToken.getCurrentAccessToken()} catch(com.facebook.FacebookSdkNotInitializedException){//do nothing} 
 
 onBindViewHolder(ViewHolder holder, final int position){ 
 holder.itemView.setVisibility(View.GONE); //hide item
 viewHolder.itemView.setLayoutParams(new RecyclerView.LayoutParams(0, 0)); //no space
 holder.mTextView.setBackgroundColor(getLighterColor(color));
 model.remove(holder.getAdapterPosition());
 
 C:\DEPO\APP\boropost\app\build can  be deleted if java.io.IOException: Could not delete folder
	    
https://github.com/coomar2841/android-multipicker-library :MediaPicker extends PickerManager

http://touchfreeze.net/ 

https://developers.google.com/android/reference/com/google/android/gms/maps/model/Circle  Polygon
com.google.android.gms.maps.model.Circle  Polygon
https://github.com/googlemaps/android-samples/blob/master/ApiDemos/app/src/main/java/com/example/mapdemo/CircleDemoActivity.java
https://developers.google.com/maps/documentation/android-api/signup to get api key (https://console.developers.google.com/apis/credentials/wizard?api=maps-android-backend.googleapis.com&project=boropost-ea8ed select a key >restriction > Android|IOS APP>  package|bundleid=com.boropost.app SHAI=FB:F1:49:00:44:C9:EF:A9:53:39:72:25:37:5E:34:F0:8C:5F:B5:D3) 
Library > google map Android | IOS >enable
<application/>        
	    <meta-data
            android:name="com.google.android.geo.API_KEY"
            android:value="AIzaSyCj4W9viVpSiLPEFR6zViuF-mqKLazQvys"/>
    
compile 'com.google.android.gms:play-services-maps:10.0.1'

http://android-er.blogspot.com/2012/12/a-simple-example-using-google-maps.html  com.google.android.gms.maps.MapFragment
https://developers.google.com/maps/documentation/android-api/

IOS
Command-Option-Esc > force close app
Finder > applications > utilities > terminal : cd Desktop/RichBost/Depo/ios/boropost
right click  > hold option btn > context menu > Copy "File" as Pathname
install cocoapods.org by sudo gem install cocoapods (dep mgmt) > pod init (if no create Podfile > add pod 'Firebase/Core' pod 'FirebaseUI[/Database Auth Facebook Phone]' > pod install (all deps spec in Podfile) > if error compatible versions on [fabric] > pod repo update | pod update Fabric > XCODE open other project > .xcworkspace > product \ clean {group:DatabaseExample|Pods.xcodeproj}
to enable crashlytics: build phrase > run script > check run script only when it is installing
xcode > preference > locations > deriv data > click btn to open in finder > /Users/hollykaldrovics/Library/Developer/Xcode/DerivedData/boropost-cizxubzlcujmbxftksoizceeglct/Build/Products/Debug-iphoneos/boropost.app.dSYM, also version for simulator and release build, copy to desktop > right click > compress > firebase crashlytics upload .dSYM zip > reupload same file to decode each crash captured
source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '8.0'
use_frameworks!
  pod 'Firebase/Storage'
  ...
  pod 'SDWebImage', '~> 4.0'
target 'MyApp' do
end
xcode > window > device & simulator > device log > crash
import FirebaseStorage //after pod 'Firebase/Storage'
Firebase > proj > add app  > ios > drag download GoogleService-Info.plist to XCODE proj root (readme) (xcode select the file in left panel, in right panel click on folder icon under related to group drop down in file inspector , go to the file location, choose it = set as relative path, rename proj folder open, open xcodeproj to sync to srcroot, open xcworkspace, delete old proj, drag new xcodeproj into xcworkspace) > do 
click top bar proj > device = iphone | new / edit schema > regen with new proj name | build / run = debug/release  

proj | src | symbol (type) | find (search) | issue (error) | test | debug | breakpoint |report (activity) navigator
click proj (switch sub proj up down btn) > general {bundle (package) ID =com.boropost.app | signing team > add account = Apple ID (if cert expired: acct dropdown > add account | xcode > pref > accounts > mgr cert > + cert for ios dev (may need take a day to effect, turn off auto sign for both project & target and turn them on again) > mach pwd  access key chain: Vkaldho123! / Hanger99) if err expire before cert exp and get 'already have a current iOS Development certificate' on adding cert, login developer.apple.com with appleid richcluo@gmail.com and rerun | app icon launchImage | linked framework lib}                               
					> info = info.plist 
                                         > build settings  { deployment | linking | info.plist | signing| version| compiler: Bridging-Header file |...}
rightclick proj folder > addfiles (auto update project.pbxproj) 
per project xxx.xcodeproj/project.pbxproj has all settings, after change, run to auto fix red items on proj nav

debug view at breakpoint> rightclick var > add exp = var.description | watch var | edit value | view value as type
nsobject click (i) > content
select text > top menu : editor > structure > reindent (=format ctrl-I) | Comment
build >Codesign wants to access key "access" in your keychain > mac pwd >always allow

support files >main.storyboard (all ui)
              /images.xcassets/(all imgs) +
right click func name > find call hier
https://stackoverflow.com/questions/25296691/get-users-current-location-coordinates
import CoreLocation  > CLLocationManager()
https://github.com/aslanyanhaik/Quick-Chat/blob/master/QuickChat/ViewControllers/ChatVC.swift
import UIKit[.UITableViewController] //foundation
import Photos let imagePicker = UIImagePickerController()
http://www.codingexplorer.com/choosing-images-with-uiimagepickercontroller-in-swift/
AnyObject = NSString //ref type or Any = "t" //value type

let | var = im|mutable, func(s1: String){ var s2=s1 //argument is immutable
optional variable Int? default to nil
if(faves == nil || faves![uid] == nil) same as  if (faves?[uid] != nil)
faves = fav as? Dictionary<String, Bool> //faves: Dictionary<String, Bool>? fav: Any
var positions = [Int]() 
positions.append(val) // not positions[i] =val

main.stroyboard : drag in new VC from lower right [bottom find box by name], hold rightclick from tab bar controller to it to create a rel, cmd-c tableview under view from existing VC and cmd-v to new VC, 

tabBar > id (attr | size) inspector > + runtime att > 
<tabBarz> <userDefinedRuntimeAttribute type="color" keyPath="tintColor">

add img set : 24 48 72 | 96 120

select element[s by cmd key] and click|shift(on baseline item or superview in tree) |-o-| [|=] to define relative|align position top|bottom|lef|right to containing view or sibling in drop down, add constraint btn to list in constraints, old contraint need to be del explicitly to eliminate conflict, heigth|width  =|>= override auto(orange)|fill rest, open Assistant Editor, hold down CTRL and click element on the storyboard and drag from structure/view to code panel (switch btw mannual to auto list full classs not interface file), select outlet|action from dropdown, and value changed|touch on from action dropdown 
interfacebuilder to staticly add default UITableViewCell to UITableView, or create a custom viewcell for repeating display by
add a empty view template, drag a UITableViewCell in it, drag label ... in it map to PostTableViewCell.xib id inspector set custome class to PostTableViewCell.swift, drag element in xib to swift to create referencing, set to tableview in program by 
    let nib = UINib(nibName: "PostTableViewCell", bundle: nil)
    tableView.register(nib, forCellReuseIdentifier: identifier)


https://github.com/aclissold/CardView

https://www.weheartswift.com/firebase-101/
push|modal segue (show|modally) child viewcontroller under same navigation controller as parent VC that must|not embed in a NC, it inherit|not nav bar in|not nav stack 
TasksTableViewController{ tasksReference.observe(.value {task = Task(snapshot: item); self.tableView.reloadData() > refresh whole dataset is too expensive than insert|

reloadRowsAtIndexPaths >tableView{TasksTableViewCell.titleLabel.text  = self.tasks[indexPath.row].title 
prepare(set value to segue.destination) before parent VC segue to child,  prepareForUnwind(save input from child) before child VC wrapup

https://github.com/firebase/FirebaseUI-iOS/blob/master/FirebaseDatabaseUI/README.md
FUITableViewDataSource (query){ FUIArray.initWithQuery(self.query) {observeQuery {handle = [self.query observeEventType:FIRDataEventTypeChildAdded
				self.tableView insertRowsAtIndexPaths
in existing Swift app, add MyFUITableViewDataSource|MyFUIArray.h/m accepting queries in Objective-C, auto popup bridging header to import to swift 

AppDelegate: FIRDatabase.database().persistenceEnabled = true //writes the data locally to the device while network interruptions
FirebaseDatabase.getInstance().setPersistenceEnabled(true); //Android

add View Controller from ([]) to MainStory (title={display on top bar} custom class={xxx.swift}), add navigation item to VC (title={display on top bar}), CTRL-Click an item or left top btn on source VC and drag to dest VC, release mouse and select the type of relationship from the prompt up (segue {show/modal}, click header VC to drag it 

internal var postType : Int!|?= 0|nil (must init prop)
expression inspect + DatabaseReference.url, click i btn to print value in output window
self.yourArray.insert(msg, at: 0)
self.tblView.beginUpdates()
self.tblView.insertRows(at: [IndexPath.init(row: 0|self.yourArray.count-1, section: 0)], with: .automatic) //insert at top|bottom
self.tblView.endUpdates()

https://stackoverflow.com/questions/39949925/firebase-closure-in-obvserveeventtype-and-observesingleeventoftype-withblock-n
.observeSingleEventOfType(.Value //one-time read vs .observeEventType(.ChildAdded //keep sync
ref.observeEventType(.Value, withBlock: { snapshot in
     if ( snapshot.value is NSNull ) { //!snapshot.exists()
          print("Skillet was not found")
     } else {
          for child in snapshot.children {   //in case there are several skillets
               let key = child.key as String
               print(key)
          }
     }
})

//PostListViewController
  override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    guard let indexPath: IndexPath = sender as? IndexPath else { return }
    guard let detail: PostDetailTableViewController = segue.destination as? PostDetailTableViewController else {
      return
    }
    if let dataSource = dataSource {
        //pass post key to PostDetailTableViewController
      detail.postKey = dataSource.snapshot(at: indexPath.row).key
    }
  }

https://firebase.googleblog.com/2015/10/best-practices-for-ios-uiviewcontroller_6.html


https://medium.com/@andycherkashyn/everything-you-need-to-know-about-ios-uitableview-79b766bf1a42 //indexPath.section
https://blog.apoorvmote.com/uitableview-with-multiple-sections-ios-swift/

https://medium.com/lean-localization/ios-localization-tutorial-938231f9f881
proj: info tab [ localization { Use Base Internationalization = base.lproj(launchscreen/main.storyboard) |  + sel japan =  ja.lproj. 
File->New->File:  iOS > Resource > Strings File Localizable.strings(base), click Japanese in right File Inspector create a new Localizable.strings(japan)  
"Signup"="Sign Up". let signupButtonText = NSLocalizedString("Signup", comment: "")

http://www.codingexplorer.com/choosing-images-with-uiimagepickercontroller-in-swift/
Circular UIImageView in UITableView

floating button https://stackoverflow.com/questions/37073935/how-to-add-floating-button-on-top-of-the-uitableview

https://andreygordeev.com/2017/02/20/uitableview-prefetching/
Recyclerview Prefetch + Glide preload 

REFACTOR
https://stackoverflow.com/questions/12276027/how-can-i-return-to-a-parent-activity-correctly

PositionUtil.convertPosition{
        var i: Int  = 0
        +++let len = Int(log10(Double(precision)))
        while(i < len){
            positions.append(abs(lat%10*10)+abs(lgt%10))
ints.xml	    
--- <integer name="location_precision">1000</integer><!--0.001 100m/300ft-->

I am not a robot https://android.jlelse.eu/using-googles-recaptcha-with-android-b44097771987
http://android-er.blogspot.com/2017/06/example-using-safetynet-recaptcha-api.html
https://medium.com/quick-code/using-googles-safetynet-recaptcha-api-with-android-48e2cf12f370

https://developer.android.com/training/safetynet/recaptcha.html
https://www.google.com/recaptcha/admin#androidsignup
Site key 6LdBrUIUAAAAAImEux3A23mWlbVm8paCnWbLoK8D 
Secret key 6LdBrUIUAAAAAPmDPCIjrpWojeBRMpY9-ueXYeRJ

newpost.act
startActivityForResult
creditcard.act //charge amt base on recurring weeks
Intent data = new Intent();
data.putExtra("recur", "Data 1 value");
setResult(RESULT_OK, data);
finish();
newpost.act
onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
        if (data.hasExtra("recur")) {
            Toast.makeText(this, data.getExtras().getString("recur"),
https://stackoverflow.com/questions/24401480/getting-devices-country-code-phone-number

https://stackoverflow.com/questions/3685790/how-to-switch-between-hide-and-view-password
passwordToggleEnable app:passwordToggleDrawable 

https://stackoverflow.com/questions/40998914/how-to-change-a-drawableleft-icon-size-on-a-button
<EditText     android:drawableLeft="@drawable/ic_username"    android:drawableStart="@drawable/ic_username"  android:drawablePadding=10dp > //The padding between the drawables and the text
<requestFocus />
edit.requestFocus(); //hight light edittext https://stackoverflow.com/questions/14327412/set-focus-on-edittext
getDialog().getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE); //key board

https://stackoverflow.com/questions/31391413/cant-change-the-height-of-my-facebook-login-button-android
<com.facebook.login.widget.LoginButton
        xmlns:facebook="http://schemas.android.com/apk/res-auto"	
        facebook:com_facebook_login_text="LOGIN"
	android:textColor="@color/white"
	android:textSize="20sp"
	android:textStyle="bold"
	android:paddingLeft|Top="15dp"
	android:drawablePadding="40dp"
	android:layout_marginRight|Bottom="20dp"/>

facebook:login_text="LOGIN"
https://stackoverflow.com/questions/31327897/custom-facebook-login-button-android
public void onClick(View v) { //use own btn fb to replace facebook btn
    if (v == fb) {        loginButton.performClick();
    
button with gradient color and round corner : create shape.xml in drawable folder like mshape.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
  <stroke android:width="2dp"
    android:color="#FFFFFF"/>
  <gradient 
    android:angle="225"
    android:startColor="#DD2ECCFA"
    android:endColor="#DD000000"/>
<corners
    android:bottomLeftRadius="7dp"
    android:bottomRightRadius="7dp"
    android:topLeftRadius="7dp"
   android:topRightRadius="7dp" />
</shape>
myactivity.xml
<Button
    android:id="@+id/btn_Shap"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/Shape"
    android:background="@drawable/mshape"/>  
    
edittext with border and round corner: Create a border.xml in Drawable folder
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="true"
        android:state_focused="true">
        <shape>
            <corners
                android:radius="2dp"/>
            <solid
                android:color="#ffffff"/>
            <stroke
                android:width="2dp"
                android:color="@color/colorAccent" />
        </shape>
    </item>
    <item android:state_enabled="true">
        <shape>
            <corners
                android:radius="2dp"/>
            <solid
                android:color="#ffffff"/>
            <stroke
                android:width="2dp"
                android:color="@color/colorGrey" />
        </shape>
    </item>
</selector>
 <EditText        android:background="@drawable/border"/> 
 https://stackoverflow.com/questions/23417443/change-border-color-when-edittext-is-focused

<parent | child  gravity | layout_gravityarranges positon related to border, center = center_horizontal + center_vertical

full screen img
xxxhdpi	1280×1920
xxhdpi	960×1600
xhdpi	640×960
hdpi	480×800
mdpi	320×480
ldpi	240×320

photoshop : image > mode > RGB

Caused by java.lang.NullPointerException: Attempt to invoke virtual method 'boolean com.boropost.app.models.User.isType()' on a null object reference
com.boropost.app.ProfileActivity.onCreate (ProfileActivity.java:179)

Caused by java.lang.NullPointerException: Attempt to get length of null array
java.util.Arrays.copyOfRange (Arrays.java:2873)
com.boropost.app.FindActivity.onCreate (FindActivity.java:55)

IMP
login https://developer.apple.com > admin@boropost.com 7139 account > cert & profile > add app ID > explicit bundle ID must match Firebase com.boropost.app, select push notification [ optional APN cert  > config > create a dev/prod cert on cert sign req (by mac > finder >  search "keychain access" > top menu > cert assist > req cert > email =admin@boropost .com ,name = boropost cert dev , save to disk ) download .cer (+cert ios distribution using the same req) > double click to install the cert on login keychain (restart pc) BEFORE get profile + dev push svc]add prov profile > select app ID > select installed cert on device for dev profile (+MAC provisinal UUID from system report) > download > import from XCODE by unsel auto mgr profilearchve > distribute app> select lastest IOS dist cert and download the dist profile that includes the certadd key > APN > download (Authkey_<KeyId>.p8 and upload to firebase > proj setting > cloud msg > APN key [or APN cert use above .cer]
xcode > capabilities > push notification > on, if err "add push note to app id" > del all at ~/Library/MobileDevice/Provisioning\ Profiles/ and re import profilehttps://help.apple.com/developer-account/#/devf822fb8fc
reg domain : use windows command to create a folder .well-known (not allowed by UI) to put download .txt  then firebase deploy reg email :noreply@boropost-ea8ed..firebaseapp.com or templated noreply@boropost.comfirebase console enable apple signin, leave svcid empty if only use for ios appapple cert & profile > ids > + cap = apple signin (invalid old profile of the id) > profiles > re+ 
                              > keys > edit > check apple signin > save xcode project | signing: + cap = apple signin <return>, debug/release : update/import dev / dist  profiles (both boropost and sendhub dev/dist profile are generated off BostMedios ios dev / dist  cert expires 8/15)| Build Setting > signing > code sign id : debug = default IOS dev or iphone dev bost  medios certrelease = iphone dist bost medios cert downloaded from apple developer and installed to key chain)clear disk Finder > Go (in the top menu). paste in: ~/Library/Caches, Library/Application Support/Users/hollykaldrovics/Library/Logs/PT |  webexmtaUI del pods [ & /Users/hollykaldrovics/Library/Developer/Xcode/DerivedData (keep 3 dir boropost sendhub cachecmoduel = pods) |iOS Device Log (20GB) | iOS Device Supports (keep latest iphone vesrion dir) ]pod update //to update firebase
Apple give user's email only if user choose share email upon login, otherwise hc36empuea@privaterelay.appleid.com, give name only on first login, to clean > setting > appleID > sec & pwd > apps using appleID > swipe to del if err Please register custom URL scheme 'com.googleusercontent.apps.1012799131250-5msr0ifenos71fkjm2gifljtc06v2a9a' in the app's Info.plist file : xcode > info (info.plist) > url type + <REVERSED_CLIENT_ID in googleservice-info.plist> if err blocked all req from device : add test phone number to firebase > auth > sign-in method > phone
xcode > general > signing > dev|release > profile = dev|dist profile           >build settings > code sign ID = iphone dist bost medios, debug|release profile = dev|dist profilehttps://clearbridgemobile.com/how-to-submit-an-app-to-the-app-store/ app store conn + app > bundle id select Boropost - bundleid in xcode screenshot taken by xcode simulator (iphone8 plus , iphone 11, ipad pro ) file > new screen shot > desktop  https://www.appstorescreenshot.com to add phone shapeif location nil : edit schema > recheck allow simulate location = NY  iphone11 white space at bottom > scrollview/tableview : autoresize updown arrow to bottom I,  message button autosize I to bottom, textview  updown arrow auto stretch & bottom I to button xcode > product > archive > packaging... >validate | upload to app store (window > organizer > archive list)if upload archive fails "no app connect account" : restart mac (regain access cert) and regen archive  if ERROR ITMS-90034:Missing or invalid signature. > xcode > sign > release > profile dropdown > re-download the same profileERROR ITMS-90475: UIRequiresFullScreen : true to info.plist
after upgrade macos, sys pref > privacy > click lock at left bottom to unlock to make change > full access + application/util/terminal sys pref > users > click lock at left bottom to unlock to make change > ctrl-click a user > advanced opt [shell=bin/zsh], in terminal > chsh -s /bin/zsh | bash"SWIFT_VERSION '3.0' is unsupported, supported versions are: 4.0, 4.2, 5.0." xcode > click top boropost > target dropdown select boropost > build setting > swift compile lang : version = 4,  same to top pods  > target alamofire, then clean and build"Multiple commands produce boropost.app" > exit xcode > terminal: sudo gem install cocoapods / pod install --repo-update > UI del pods instead of rm -rf pods > pod update | pod install
"Multiple commands produce info.plist" > xcode >build phrase > cp bundle res > - info.plist or file > ws setting > build sys = from new to legacy
"This version of OSX is not able to perform the necessary dSYM transformations."  > upgrade Podfile pod 'Fabric', '~> 1.10.2' pod 'Crashlytics', '~> 3.14.0'"Duplicate Symbols for Architecture arm64" > dup pod install, rm pods and install pod"'FirebaseCore/FirebaseCore.h' file not found." > re install pod"app icon can not be transparent" photoshop open ic_launcher_mac.psd, export > web legacy > uncheck transparency | change size > AppIcon.appiconset email issue after validate/upload by xcode successfully : ITMS-90683: Missing Purpose String in Info.plist : The app's Info.plist file should contain a NSLocationAlwaysUsageDescription / NSPhotoLibraryUsageDescription key
info.plist  + privacy - location / photo : App requires access to your location / photo lib to show local posts. 
ITMS-90809: Deprecated API Usage - UIWebView APIs : upgrade FBLogin > Bolts 
xcode not detect iphone : sudo pkill usbmuxd in terminal, restart xcodeopen crash report from Apple Store, copy paste to a .crash file by vim, drag into device log list in device window to readfirebase auth template verify domain TXT record: from boropost.com to @ CNAME record: from firebase._domainkey.boropost.com to firebase._domainkey

https://play.google.com/apps/publish/ bostmedios@gmail.com > select app > left menu (hover grey check mark for what need to be done) | store list > grahic assets | app signing > copy fingerprint of app signing cert by google (not upload cert by dev)  to firebase to integration link | price & dist : no ads before app content 
MUST re-download google-services file after add any key to firebase, it include "certificate_hash": "cedaa0f1dcaf14dc4828a7133f4b6c0b5235632e" for each keyhttps://console.cloud.google.com/ boropost sendhub to check the API key AIzaSyCj4W9viVpSiLPEFR6zViuF-mqKLazQvys AIzaSyCX1pJGxC-CXsw1q5NjR4OPG8NPrK1Xhss for google map from left menu products > credentials, it is also in "api_key": of google-services.json and  <meta-data  android:name="com.google.android.geo.API_KEY" of AndroidManifest.xml ,  click to view the restrictions on android app + com.boropost.application | release key CE:DA:A0:F1:DC:AF:14:DC:48:28:A7:13:3F:4B:6C:0B:52:35:63:2E and click SAVE on bottom, otherwise get Unexpected response code 403 for https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?alt=proto&key=AIzaSyCj4W9viVpSiLPEFR6zViuF-mqKLazQvys when running release APK
API key IOS   AIzaSyBnV97gvysPZtjsedpW9cWs-bBe-eXRVNM for com.boropost.application also in IOS  google-services.plist
GIT BASH  create release key vs debug key used by android studio to sign the app, it will be recognize by google after upload .apk and show as upload cert,  google play app signing cert is for auto used when distribute 
 keytool -genkey -v -keystore ~/.android/release.keystore -storepass android -alias androidreleasekey -keypass android -validity 10000 -dname "CN=Android Release,O=Android,C=US"
  Certificate fingerprints:
         MD5:  5A:F9:11:E3:BA:56:3B:FC:AF:70:93:4A:4B:B8:16:B8
         SHA1: CE:DA:A0:F1:DC:AF:14:DC:48:28:A7:13:3F:4B:6C:0B:52:35:63:2E  
 keytool -list -v -keystore ~/.android/ release.keystore [-alias androidreleasekey]  //to view all keys, upload finger print to firebase
keytool -changealias -alias "androidreleasekey" -destalias "boropostreleasekey" -keypass Hanger99 -keystore  ~/.android/release.keystore -storepass Hanger99 //change namekeytool -ex / importcert -alias boropostreleasekey / (import always as androidreleasekey)  -file bostreleasekey.cer -keystore ~/.android/release.keystore  -list -v  //export the key to cert for import to another device
[ keytool -export -rfc -alias sendhubreleasekey -file C:/Depo/App/Android/sendhub/sendhubreleasekey.pem -keystore ~/.android/release.keystore
gen .pem for bundle, export encrypted key : path to .pem ]android studio 9 > build > gen signed bundle/APK > APK > keystore path = C:\Users\holly\.android\release.keystore | pwd = Hanger99 ( keytool -storepasswd -keystore release.keystore to change store pwd from default 'android', keytool -keypasswd  -alias androiddebugkey -keystore release.keystore to change key pwd from default 'android') browser to list existing key  androidreleasekey in store > apk dest = C:\Depo\App\Android\boropost\app | release | sign v2 full apk  > copy apk to device > setting : security [allow unknown source]                           file > proj struct > flavor > min SDK >= 28 (sdk manager last icon on top bar or setting > appearance & behavior  > system | modules > default config  > version code =7  name = 1.4 | prop compile SDK  version > select API 28  |  SDK tool  [pack detail] > android sdk build tool > +28.0.3)add -ignorewarnings to app/proguard-rules file if failed for task ':app:transformClassesAndResourcesWithProguardForRelease
check -keepclassmembers class com.boropost.application.models.** otherwise object in models won't be populated running release apk
obfuscate by proguard https://medium.com/thecodinghouse/obfuscating-and-optimizing-android-app-proguard-can-do-it-all-3d19c8ae9ec  
https://github.com/stripe/example-ios-backend deploy to heroku button to init app bost 
https://github.com/stripe/example-ios-backendgit remote -v origin	https://github.com/stripe/example-ios-backend (fetch)origin	https://github.com/stripe/example-ios-backend (push)git pull origin master //get latest files from orogingit log //find prev commits, not from git web git checkout f1a25ccaeadf2fa3a786958014cdbbbedb9ae7f3 //revert to spec commit aug 7 2018 STRIPE_TEST_SECRET_KEY = test/live key, [more] > log, [open app] to testgit branch v10 f1a25ccaeadf2fa3a786958014cdbbbedb9ae7f3 //branch to spec commitgit checkout v10 //switch to the branchgit branch -a //list all branches, * v10 is current https://dashboard.stripe.com > developer > monitor: error | log to failed reqs 

ios 15 upgrade in xcode > project:min ios = 15, podfile: ios platform 12.0, rerun pod install, follow err instruction to install dependency ,  multi-select targets under pods project in xcode > set ios deployment target to 12.0 (will be overiden by pod installl each time) , follow suggested fix or  delete the pod proj folder and rerun pod update <proj> or  comment out src code causing build err . select any ios simulator to build avoid "FirbaseCore.h not found" when build on a specific simulator, change main target and pods target exclude arch + any ios simulator : arm64 to avoid "build for ios simulator but link to object built for ios on arch arm64"
if xcode build err from Pods keeps disappear, select the project Pods and under targets choose the compponent where the err from and build then expand error on left panel to keep
pod install error:
uninitialized constant ActiveSupport::LoggerThreadSafeLevel::Logger (NameError) : + require "logger" after require "active_support/concern" into sudo vim /Library/Ruby/Gems/2.6.0/gems/activesupport-6.1.7.10/lib/active_support/logger_thread_safe_level.rb
LoadError - cannot load such file -- ffi_c : brew install cocoapods or sudo gem uninstall ffi & sudo gem install ffi,
upgrade SPM  https://firebase.google.com/docs/ios/installation-methods#swift-package-manager

androoid 15 upgrade > proj struct : AGP v8.13.2 gradle v8.13 , SDK mgr : android 15 platform 35,  
build.gradle of project boropost :  - jcenter() //mvnrepository.com central jcenter 
build.gradle of moduel app : targetSdkVersion 35, + namespace("com.boropost.application") ,  sourceCompatibility JavaVersion.VERSION_1_8 , firebase-ui-database:7.1.1 , facebook-login:18.1.3, androidx.test.ext:junit:1.1.5
after update build.gradle must ( file >  sync gradle project at lower left bar > buildbefore run app
lower left bar : problems > project error : inspect code 
select app in upper left project | packages  view  > build > compile boropost app > select app on toolbar instead of boropost to  display device next run button
"cannot resolve symbol R" : File> invalidate cache , "constant expression required " : replace switch (R,id) with if // Android Gradle Plugin 8.0.0 resources (e.g. R.id. ...) are no longer declared final 

web.rb in https://dashboard.render.com/ bostmedios@gmail Hanger99  https://github.com/richardqluo/app/blob/main/README.md
node.js (firebase cloud func)    https://github.com/mohaumpoti/stripe-connect-nodejs-app    index.js    https://medium.com/@mohau/stripe-api-authentication-swift-3-node-js-xcode-tutorial-f4ace28e1e5a
    https://www.bigscal.com/blogs/backend-technology/how-to-integrate-stripe-payment-apis-using-node-js/    https://www.geeksforgeeks.org/how-to-integrate-stripe-payment-gateway-in-node-js/ 

windows task schduler > create a basic task> general: run only when user logged on | action : browse to "C:\Program Files\Python38\python.exe"  arg= instagramBot.py  startin= C:\Depo\App\bot\InstagramBot |  condition: wake up computer to run this task Control Panel -> Power Options -> Edit Plan Settings" for the power plan u are using. Then select "Change advanced power settings". Next go to "Sleep -> Allow wake timers" enable auto wake up

google drive : bostmedios
